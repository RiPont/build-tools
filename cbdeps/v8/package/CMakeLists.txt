FILE(MAKE_DIRECTORY ${CMAKE_INSTALL_PREFIX}/bin)

# Determine which directory to copy libs from
IF (CMAKE_BUILD_TYPE STREQUAL "Debug" AND
    IS_DIRECTORY "${CMAKE_CURRENT_SOURCE_DIR}/lib/Debug")
    SET (LIB_DIR Debug)
ELSE()
    SET (LIB_DIR Release)
ENDIF ()

IF (WIN32)
    FILE (COPY lib/${LIB_DIR}/v8.dll DESTINATION "${CMAKE_INSTALL_PREFIX}/bin")
    FILE (COPY lib/${LIB_DIR}/v8_libbase.dll DESTINATION "${CMAKE_INSTALL_PREFIX}/bin")
    FILE (COPY lib/${LIB_DIR}/v8_libplatform.dll DESTINATION "${CMAKE_INSTALL_PREFIX}/bin")
    FILE (COPY lib/${LIB_DIR}/zlib.dll DESTINATION "${CMAKE_INSTALL_PREFIX}/bin")
    FILE (COPY lib/${LIB_DIR}/icui18n.dll DESTINATION "${CMAKE_INSTALL_PREFIX}/bin")
    FILE (COPY lib/${LIB_DIR}/icuuc.dll DESTINATION "${CMAKE_INSTALL_PREFIX}/bin")
    FILE (COPY lib/${LIB_DIR}/icudtl.dat DESTINATION "${CMAKE_INSTALL_PREFIX}/bin")
    FILE (COPY lib/${LIB_DIR}/icudtl_extra.dat DESTINATION "${CMAKE_INSTALL_PREFIX}/bin")
ELSE (WIN32)
    FILE (COPY lib/${LIB_DIR}/
          DESTINATION "${CMAKE_INSTALL_PREFIX}/lib"
          PATTERN .dat EXCLUDE)
    FILE (COPY lib/${LIB_DIR}/icudtl.dat DESTINATION "${CMAKE_INSTALL_PREFIX}/bin")
    FILE (COPY lib/${LIB_DIR}/icudtl_extra.dat DESTINATION "${CMAKE_INSTALL_PREFIX}/bin")
ENDIF (WIN32)
